---
phase: 04.2-style-phase-4-screens
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/pages/TeamsPage.tsx
  - apps/web/src/pages/TeamDetailPage.tsx
  - apps/web/src/components/team/TeamTree.tsx
  - apps/web/src/components/team/MemberList.tsx
  - apps/web/src/components/team/AddMemberModal.tsx
autonomous: true

must_haves:
  truths:
    - "Teams list page shows team cards with proper hover states"
    - "Team detail page displays stats with semantic color indicators"
    - "TeamTree shows hierarchy with visual connectors and current team highlighted with neutral background"
    - "MemberList separates leaders and members with clear groupings"
    - "AddMemberModal has proper form styling and search interface"
    - "All team screens work correctly in dark and light modes"
  artifacts:
    - path: "apps/web/src/pages/TeamsPage.tsx"
      provides: "Styled teams list page"
      contains: "bg-card|hover:bg-muted"
    - path: "apps/web/src/pages/TeamDetailPage.tsx"
      provides: "Styled team detail with stats"
      contains: "bg-card|border-l-primary|border-l-success"
    - path: "apps/web/src/components/team/TeamTree.tsx"
      provides: "Themed team hierarchy tree with neutral active state"
      contains: "bg-muted|font-semibold"
    - path: "apps/web/src/components/team/MemberList.tsx"
      provides: "Styled member list with groups"
      contains: "text-muted-foreground|hover:bg-muted"
    - path: "apps/web/src/components/team/AddMemberModal.tsx"
      provides: "Themed add member modal"
      contains: "bg-card|Button"
  key_links:
    - from: "TeamDetailPage.tsx"
      to: "MemberList.tsx"
      via: "component usage"
      pattern: "<MemberList"
---

<objective>
Style the Teams feature (TeamsPage, TeamDetailPage, TeamTree, MemberList, AddMemberModal) with consistent theming.

Purpose: Create a cohesive team management interface that clearly shows hierarchy, membership, and stats using the design system.

Output: Five styled components using design tokens, semantic colors for stats, and proper interactive states.
</objective>

<execution_context>
@/Users/parthpatel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/parthpatel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/04.2-style-phase-4-screens/04.2-CONTEXT.md
@apps/web/src/index.css
@apps/web/src/components/ui/button.tsx
@apps/web/src/components/ui/input.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Style TeamsPage and TeamDetailPage</name>
  <files>apps/web/src/pages/TeamsPage.tsx, apps/web/src/pages/TeamDetailPage.tsx</files>
  <action>
**TeamsPage.tsx:**

1. **Page container**: Replace `.page-container` with `max-w-4xl mx-auto p-6 space-y-6`

2. **Loading skeleton**: Use `animate-pulse` with `bg-muted rounded` elements

3. **Error banner**: `bg-destructive/10 text-destructive border border-destructive/20 rounded-md p-4`

4. **Page header**: 
   ```tsx
   <header className="flex items-center justify-between">
     <div>
       <h1 className="text-2xl font-bold text-foreground">Teams</h1>
       <p className="text-muted-foreground">{data?.total || 0} teams total</p>
     </div>
   </header>
   ```

5. **Empty state**: `text-center py-12 text-muted-foreground`

6. **Teams list card**: `bg-card rounded-lg border divide-y divide-border`

7. **Team list item (Link)**:
   ```tsx
   <Link
     to={`/teams/${team.team_id}`}
     className="flex items-center justify-between p-4 hover:bg-muted/50 transition-colors"
   >
   ```

8. **Team info**: 
   - Name: `font-medium text-foreground`
   - Description: `text-sm text-muted-foreground mt-1`

9. **Team meta**: Style member count with `text-sm text-muted-foreground`

**TeamDetailPage.tsx:**

1. **Page container**: `max-w-4xl mx-auto p-6 space-y-6`

2. **Breadcrumb**: 
   - Container: `flex items-center gap-2 text-sm`
   - Link: `text-muted-foreground hover:text-foreground transition-colors`
   - Separator: `text-muted-foreground`
   - Current: `text-foreground`

3. **Team header**: 
   - Title row: `flex items-center gap-3`
   - Team name: `text-2xl font-bold text-foreground`
   - Status badge: Same pattern as user status
   - Description: `text-muted-foreground mt-2`
   - Parent link: `text-sm text-muted-foreground` with Link styled `text-primary hover:underline`

4. **Stats grid**: `grid grid-cols-2 md:grid-cols-4 gap-4`

5. **Stat cards with semantic left borders**:
   ```tsx
   <div className="bg-card rounded-lg border p-4 border-l-4 border-l-primary">
     <p className="text-2xl font-bold text-foreground">{team.member_count}</p>
     <p className="text-sm text-muted-foreground">Members</p>
   </div>
   // Leaders: border-l-info
   // Sub-teams: border-l-success  
   // Capacity: border-l-warning
   ```

6. **Section containers**: `space-y-4`

7. **Section headers**: 
   ```tsx
   <div className="flex items-center justify-between">
     <h2 className="text-lg font-semibold text-foreground">Members</h2>
     <Button size="sm" onClick={() => setShowAddMember(true)}>Add Member</Button>
   </div>
   ```

8. **Card wrappers**: `bg-card rounded-lg border p-4`

9. **Tag list**: `flex flex-wrap gap-2`
   - Tags: `inline-flex items-center px-2.5 py-0.5 rounded-full text-xs bg-muted text-muted-foreground`

Import Button from "@/components/ui/button", Link from react-router-dom, cn from "@/lib/utils".
  </action>
  <verify>Run `pnpm exec tsc --noEmit`. View /teams - teams list with hover states. View /teams/:id - stats cards with colored left borders, breadcrumb navigation.</verify>
  <done>TeamsPage has styled team list with hover states. TeamDetailPage has semantic stat cards and proper section styling.</done>
</task>

<task type="auto">
  <name>Task 2: Style TeamTree and MemberList components</name>
  <files>apps/web/src/components/team/TeamTree.tsx, apps/web/src/components/team/MemberList.tsx</files>
  <action>
**TeamTree.tsx:**

IMPORTANT: Per user decision, navigation active states must use NEUTRAL highlights, not purple.
Purple is reserved for interactive/action elements only (buttons, links, selections).

1. **Container**: Replace `.team-tree` with `space-y-1`

2. **Tree node** (neutral active state per user decision):
   ```tsx
   <div
     className={cn(
       "rounded-md transition-colors",
       node.team_id === currentTeamId 
         ? "bg-muted"  // Neutral highlight for active navigation state
         : "hover:bg-muted/50"
     )}
   >
   ```

3. **Tree link**:
   ```tsx
   <Link 
     to={`/teams/${node.team_id}`}
     className={cn(
       "flex items-center justify-between p-2",
       node.team_id === currentTeamId && "font-semibold"  // Bold text indicates current, not purple
     )}
   >
   ```

4. **Tree content**: `flex items-center gap-2`

5. **Tree connector** (for indentation):
   ```tsx
   {node.depth > 0 && (
     <span 
       className="text-muted-foreground"
       style={{ marginLeft: `${(node.depth - 1) * 16}px` }}
     >
       â””
     </span>
   )}
   ```

6. **Team info container**: `min-w-0 flex-1`

7. **Team name**: Current team gets `font-semibold text-foreground`, others `text-foreground`

8. **Team description**: `text-xs text-muted-foreground truncate`

9. **Team meta** (member count): `text-xs text-muted-foreground`

10. **Empty state**: `text-muted-foreground text-sm py-2`

**MemberList.tsx:**

1. **Container**: Replace `.member-list` with `space-y-6`

2. **Member group container**: `space-y-3`

3. **Group title**: `text-sm font-medium text-muted-foreground uppercase tracking-wide`

4. **Group list**: `bg-card rounded-lg border divide-y divide-border`

5. **Member row**:
   ```tsx
   <div className="flex items-center justify-between p-3">
   ```

6. **Member info (Link)**: `flex items-center gap-3 min-w-0 flex-1 hover:opacity-80 transition-opacity`

7. **Member avatar**: `size-10 rounded-full bg-muted flex items-center justify-center text-sm font-medium text-muted-foreground`

8. **Member details container**: `min-w-0 flex-1`

9. **Member name**: `font-medium text-foreground truncate`

10. **Member email**: `text-sm text-muted-foreground truncate`

11. **Member role badge**: `text-xs` with same role colors as UserTable

12. **Member actions**:
    ```tsx
    <div className="flex items-center gap-1">
      <Button variant="ghost" size="sm">...</Button>
    </div>
    ```

13. **Action buttons**: Use Button with variant="ghost" size="sm"
    - Promote/demote: neutral
    - Remove: `text-destructive hover:text-destructive hover:bg-destructive/10`

14. **Empty state**: `text-muted-foreground text-sm py-4 text-center`

Import Button, Link, cn.
  </action>
  <verify>Run `pnpm exec tsc --noEmit`. View TeamTree - current team has neutral (muted) background highlight and bold text. View MemberList - leaders and members in separate groups with proper styling.</verify>
  <done>TeamTree shows hierarchy with current team using neutral highlight (bg-muted) and bold text. MemberList has grouped sections with action buttons.</done>
</task>

<task type="auto">
  <name>Task 3: Style AddMemberModal component</name>
  <files>apps/web/src/components/team/AddMemberModal.tsx</files>
  <action>
Replace all custom CSS classes with Tailwind utilities:

1. **Modal overlay**: `fixed inset-0 bg-black/50 flex items-center justify-center z-50`

2. **Modal content**: 
   ```tsx
   <div 
     className="bg-card rounded-lg border shadow-lg p-6 max-w-lg w-full mx-4 max-h-[80vh] flex flex-col"
     onClick={(e) => e.stopPropagation()}
   >
   ```

3. **Modal header**: `text-lg font-semibold text-foreground mb-4`

4. **Search field container**: `space-y-4`

5. **Search input**: Import Input from "@/components/ui/input" or style with:
   `w-full px-3 py-2 rounded-md border border-input bg-background text-foreground placeholder:text-muted-foreground focus:ring-2 focus:ring-ring`

6. **User select list container**: `flex-1 overflow-y-auto min-h-[200px] max-h-[300px] border rounded-md`

7. **Loading/empty text**: `text-muted-foreground text-sm text-center py-8`

8. **User select items container**: `divide-y divide-border`

9. **User select item** (selection IS allowed to use purple per user decision):
   ```tsx
   <button
     onClick={() => setSelectedUser(user)}
     className={cn(
       "w-full p-3 text-left transition-colors",
       "hover:bg-muted/50",
       selectedUser?.user_id === user.user_id && "bg-primary/10"  // Selection uses purple (allowed)
     )}
   >
   ```

10. **User select name**: `font-medium text-foreground`

11. **User select email**: `text-sm text-muted-foreground`

12. **Selected user preview**:
    ```tsx
    <div className="mt-4 p-3 bg-muted/50 rounded-md">
      <p className="text-xs text-muted-foreground uppercase tracking-wide">Selected</p>
      <p className="font-medium text-foreground">{selectedUser.display_name}</p>
      <p className="text-sm text-muted-foreground">{selectedUser.email}</p>
    </div>
    ```

13. **Role select field**: Same styling as other form inputs
    - Label: `text-sm font-medium text-foreground`
    - Select: `w-full px-3 py-2 rounded-md border border-input bg-background text-foreground mt-1`

14. **Modal actions**: `flex justify-end gap-3 mt-6`

15. **Buttons**:
    ```tsx
    <Button disabled={!selectedUser || isPending}>
      {isPending ? 'Adding...' : 'Add Member'}
    </Button>
    <Button variant="secondary" onClick={onClose}>
      Cancel
    </Button>
    ```

Import Button from "@/components/ui/button", Input from "@/components/ui/input", cn from "@/lib/utils".
  </action>
  <verify>Run `pnpm exec tsc --noEmit`. Open AddMemberModal - search input styled, user list scrollable with purple selection highlight (allowed for selections), preview card shows selected user, purple Add Member button.</verify>
  <done>AddMemberModal has proper card styling, scrollable user list with purple selection (allowed per user decision), and themed form controls.</done>
</task>

</tasks>

<verification>
After all tasks complete:
1. Visit /teams - verify team list with hover states
2. Visit /teams/:id - verify stats cards, member list, team tree
3. Click "Add Member" - verify modal styling with purple selection
4. Verify TeamTree highlights current team with NEUTRAL background (not purple) and bold text
5. Toggle dark/light mode - all elements should adapt correctly
6. No custom CSS class names remain
</verification>

<success_criteria>
- TeamsPage shows team list with hover states in card container
- TeamDetailPage has semantic stat cards (purple=members, blue=leaders, green=subteams, yellow=capacity)
- TeamTree highlights current team with NEUTRAL background (bg-muted) and bold text (NOT purple)
- MemberList separates leaders and regular members with group headers
- AddMemberModal has scrollable user list with purple selection highlight (selections are interactive, allowed)
- All team screens work in both dark and light modes
- Purple accent only on buttons and interactive selections (NOT navigation active states)
- TypeScript compilation passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/04.2-style-phase-4-screens/04.2-03-SUMMARY.md`
</output>
