---
phase: 09-annotation-interface
plan: 04
type: execute
wave: 2
depends_on: ["09-01", "09-02"]
files_modified:
  - apps/web/src/components/annotation/SkipTaskModal.tsx
  - apps/web/src/hooks/useSkipReasons.ts
  - apps/web/src/api/skipReasons.ts
  - apps/web/src/pages/AnnotatePage.tsx
autonomous: true

must_haves:
  truths:
    - "Skip modal shows available reasons"
    - "Selecting a reason and confirming skips the task"
    - "Task advances to next after skip"
  artifacts:
    - path: "apps/web/src/components/annotation/SkipTaskModal.tsx"
      provides: "Skip task modal component"
      min_lines: 80
    - path: "apps/web/src/api/skipReasons.ts"
      provides: "Skip reasons API"
      exports: ["getSkipReasons", "skipTask"]
  key_links:
    - from: "apps/web/src/components/annotation/SkipTaskModal.tsx"
      to: "/api/v1/tasks/{taskId}/skip"
      via: "skipTask API call"
      pattern: "skipTask"
---

<objective>
Implement skip task flow with reason selection modal.

Purpose: Allow annotators to skip tasks they cannot complete while tracking why.
Output: SkipTaskModal component that lists reasons and submits skip action.
</objective>

<execution_context>
@/Users/parthpatel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/parthpatel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-annotation-interface/09-CONTEXT.md
@.planning/phases/09-annotation-interface/09-01-SUMMARY.md
@.planning/phases/09-annotation-interface/09-02-SUMMARY.md
@apps/web/src/pages/AnnotatePage.tsx
@apps/web/src/components/ui/dialog.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create skip reasons API and hook</name>
  <files>
    apps/web/src/api/skipReasons.ts
    apps/web/src/api/index.ts
    apps/web/src/hooks/useSkipReasons.ts
    apps/web/src/hooks/index.ts
  </files>
  <action>
Create skip reasons API client:

**apps/web/src/api/skipReasons.ts:**
- getSkipReasons(projectId: string): Promise&lt;SkipReason[]&gt;
  - GET /projects/{projectId}/skip-reasons
- skipTask(taskId: string, skipReasonId: string, note?: string): Promise&lt;void&gt;
  - POST /tasks/{taskId}/skip with { skip_reason_id, note }

**apps/web/src/hooks/useSkipReasons.ts:**
- useSkipReasons(projectId: string | undefined)
  - React Query hook, queryKey: ['skip-reasons', projectId]
  - enabled: !!projectId
- useSkipTask()
  - useMutation for skipTask API call

Export from index files.
  </action>
  <verify>pnpm --filter web build compiles</verify>
  <done>Skip reasons API and hooks created</done>
</task>

<task type="auto">
  <name>Task 2: Create SkipTaskModal and integrate into AnnotatePage</name>
  <files>
    apps/web/src/components/annotation/SkipTaskModal.tsx
    apps/web/src/components/annotation/index.ts
    apps/web/src/pages/AnnotatePage.tsx
  </files>
  <action>
Create skip task modal:

**SkipTaskModal.tsx:**
Props: open, onOpenChange, taskId, projectId, onSkipped

UI:
- Dialog with title "Skip Task"
- Loading state while fetching reasons
- RadioGroup for skip reason selection (required)
- Textarea for optional additional notes
- Cancel and "Skip Task" buttons
- Skip Task button disabled until reason selected

On skip:
- Call useSkipTask mutation
- Close modal on success
- Call onSkipped callback
- Navigate to /queue

**Update AnnotatePage.tsx:**
- Add showSkipModal state
- Connect onSkip toolbar button to setShowSkipModal(true)
- Render SkipTaskModal with task.task_id and task.project_id
- Pass onSkipped callback (optional)

Export SkipTaskModal from index.ts.
  </action>
  <verify>Skip modal opens, shows reasons, skipping navigates to queue</verify>
  <done>Skip task flow working end-to-end</done>
</task>

</tasks>

<verification>
- Click Skip button, modal opens
- Skip reasons load from API
- Select reason, click Skip Task
- Task is skipped, navigate to queue
</verification>

<success_criteria>
- Skip modal shows system + project skip reasons
- Reason selection is required
- Skipping advances workflow and returns to queue
- Optional note can be added
</success_criteria>

<output>
After completion, create .planning/phases/09-annotation-interface/09-04-SUMMARY.md
</output>
