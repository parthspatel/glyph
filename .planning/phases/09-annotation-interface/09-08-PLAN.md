---
phase: 09-annotation-interface
plan: 08
type: execute
wave: 5
depends_on: ["09-07"]
files_modified:
  - apps/web/src/pages/AdjudicatePage.tsx
  - apps/web/src/components/adjudication/AnnotationTabs.tsx
  - apps/web/src/components/adjudication/ResolutionPanel.tsx
  - apps/web/src/components/adjudication/index.ts
  - apps/web/src/hooks/useAdjudication.ts
  - apps/web/src/api/adjudication.ts
  - apps/web/src/App.tsx
autonomous: true

must_haves:
  truths:
    - "Multiple annotations displayed for comparison"
    - "Adjudicator can select or create final resolution"
    - "Resolution is submitted as authoritative annotation"
  artifacts:
    - path: "apps/web/src/pages/AdjudicatePage.tsx"
      provides: "Adjudication page"
      min_lines: 100
    - path: "apps/web/src/components/adjudication/AnnotationTabs.tsx"
      provides: "Multi-annotation comparison"
      min_lines: 40
  key_links:
    - from: "apps/web/src/pages/AdjudicatePage.tsx"
      to: "/api/v1/tasks/{taskId}/adjudicate"
      via: "submitResolution API"
      pattern: "submitResolution"
---

<objective>
Build adjudication interface for resolving conflicting annotations.

Purpose: Enable adjudicators to compare multiple annotations and create final resolution.
Output: AdjudicatePage with tabbed annotation comparison and resolution submission.
</objective>

<execution_context>
@/Users/parthpatel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/parthpatel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/09-annotation-interface/09-CONTEXT.md
@.planning/phases/09-annotation-interface/09-07-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create adjudication API and hook</name>
  <files>
    apps/web/src/api/adjudication.ts
    apps/web/src/api/index.ts
    apps/web/src/hooks/useAdjudication.ts
    apps/web/src/hooks/index.ts
  </files>
  <action>
Create adjudication API:

**apps/web/src/api/adjudication.ts:**
- AdjudicationData: { task, annotations: Annotation[], layout }
- getTaskForAdjudication(taskId: string): Promise&lt;AdjudicationData&gt;
  - GET /tasks/{taskId}/adjudicate
- ResolutionRequest: { data, source_annotation_id?, notes? }
- submitResolution(taskId: string, request: ResolutionRequest): Promise&lt;Annotation&gt;
  - POST /tasks/{taskId}/adjudicate

**apps/web/src/hooks/useAdjudication.ts:**
- useTaskForAdjudication(taskId: string | undefined)
  - React Query hook
- useSubmitResolution(taskId: string)
  - useMutation, toast on success/error

Export from index files.
  </action>
  <verify>pnpm --filter web build compiles</verify>
  <done>Adjudication API and hooks created</done>
</task>

<task type="auto">
  <name>Task 2: Create adjudication components and page</name>
  <files>
    apps/web/src/components/adjudication/AnnotationTabs.tsx
    apps/web/src/components/adjudication/ResolutionPanel.tsx
    apps/web/src/components/adjudication/index.ts
    apps/web/src/pages/AdjudicatePage.tsx
    apps/web/src/App.tsx
  </files>
  <action>
Create adjudication UI:

**AnnotationTabs.tsx:**
Props: annotations, layout, taskInput, selectedId, onSelect

- Use Tabs component from shadcn/ui
- TabsList with one trigger per annotation ("Annotator 1", "Annotator 2", etc.)
- TabsContent for each annotation with LayoutRenderer (read-only)

**ResolutionPanel.tsx:**
Props: layout, taskInput, resolutionData, onResolutionChange, onSubmit, isSubmitting?

- Border rounded container
- Header: "Final Resolution" with Submit Resolution button
- Content: LayoutRenderer with resolutionData (editable)

**AdjudicatePage.tsx:**
- Get taskId from useParams
- Use useTaskForAdjudication hook
- State: selectedAnnotation, resolutionData
- Initialize both from first annotation in useEffect
- handleSelectAnnotation: copy selected annotation's data to resolutionData
- handleSubmit: submitResolution with data and source_annotation_id, navigate to /queue

Layout:
1. Header with "Adjudicate Task" and annotation count
2. Two-column grid: AnnotationTabs on left, ResolutionPanel on right

**Update App.tsx:**
Add route: &lt;Route path="/adjudicate/:taskId" element={&lt;AdjudicatePage /&gt;} /&gt;

Export components from index.ts.
  </action>
  <verify>Adjudication page loads and resolution submission works</verify>
  <done>Adjudication page created and routed</done>
</task>

</tasks>

<verification>
- Navigate to /adjudicate/:taskId
- Multiple annotations shown in tabs
- Clicking tab shows different annotation
- Resolution panel editable
- Submit Resolution saves and navigates to queue
</verification>

<success_criteria>
- Multiple annotations displayed in tabs
- Selecting annotation copies data to resolution
- Resolution can be edited
- Submit creates final annotation
- Navigates to queue after submission
</success_criteria>

<output>
After completion, create .planning/phases/09-annotation-interface/09-08-SUMMARY.md
</output>
