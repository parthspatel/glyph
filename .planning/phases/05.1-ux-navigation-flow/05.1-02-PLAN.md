---
phase: 05.1-ux-navigation-flow
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/pages/admin/ProjectTypesPage.tsx
  - apps/web/src/App.tsx
  - apps/web/src/lib/navigation.ts
autonomous: true

must_haves:
  truths:
    - "Admin users can navigate to Project Types management page"
    - "Non-admin users cannot access Project Types page"
    - "Project Types nav item appears only for admin users"
  artifacts:
    - path: "apps/web/src/pages/admin/ProjectTypesPage.tsx"
      provides: "Project types list and management UI"
      min_lines: 80
    - path: "apps/web/src/App.tsx"
      provides: "Protected route for /admin/project-types"
      contains: "project-types"
    - path: "apps/web/src/lib/navigation.ts"
      provides: "Nav item for Project Types"
      contains: "project-types"
  key_links:
    - from: "apps/web/src/App.tsx"
      to: "ProtectedRoute"
      via: "Route wrapper"
      pattern: "ProtectedRoute.*admin.*project-types"
    - from: "apps/web/src/lib/navigation.ts"
      to: "filterNavItems"
      via: "roles array"
      pattern: 'roles.*admin'
---

<objective>
Create the Project Types admin page with navigation, allowing administrators to view and manage project type templates.

Purpose: Project Types are admin-managed templates that define schemas and skill requirements for projects. Admins need a dedicated management interface accessible from the main navigation.
Output: ProjectTypesPage with list view, admin-only route, and sidebar navigation item.
</objective>

<execution_context>
@/Users/parthpatel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/parthpatel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@apps/web/src/pages/admin/UsersPage.tsx
@apps/web/src/hooks/useProjectTypes.ts
@apps/web/src/api/projectTypes.ts
@apps/web/src/App.tsx
@apps/web/src/lib/navigation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ProjectTypesPage component</name>
  <files>apps/web/src/pages/admin/ProjectTypesPage.tsx</files>
  <action>
Create a new admin page for managing project types. Follow the pattern established by AdminUsersPage.tsx.

The page should include:
1. Page header with title "Project Types" and description
2. "Create Type" button (links to /admin/project-types/new - placeholder for future)
3. Table displaying project types with columns:
   - Name
   - Description (truncated)
   - Difficulty Level
   - System/Custom badge
   - Created date
   - Actions (Edit, Delete)
4. Loading state with skeleton
5. Empty state when no project types exist
6. Use shadcn/ui components: Card, Table, Button, Badge, Skeleton

Use the existing `useProjectTypes` hook to fetch data. Follow the design system from Phase 3.1/4.2:
- Use semantic colors (bg-card, border-border, text-muted-foreground)
- Purple for interactive elements (buttons)
- Badge variants for system vs custom types

Structure:
```typescript
export function ProjectTypesPage() {
  const { data, isLoading, error } = useProjectTypes();
  // ... render table with project types
}
```

Import Layers icon from lucide-react for the page icon (matches nav item).
  </action>
  <verify>
Run `pnpm build` - no TypeScript errors. Page renders with table structure.
  </verify>
  <done>
ProjectTypesPage component created with table displaying project types, loading state, and empty state.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add route and navigation item</name>
  <files>apps/web/src/App.tsx, apps/web/src/lib/navigation.ts</files>
  <action>
1. In App.tsx, add the route inside the existing admin ProtectedRoute block:
```typescript
<Route element={<ProtectedRoute requiredRoles={["admin"]} />}>
  <Route path="/admin/users" element={<AdminUsersPage />} />
  <Route path="/admin/project-types" element={<ProjectTypesPage />} />
</Route>
```

Import ProjectTypesPage at the top:
```typescript
import { ProjectTypesPage } from "./pages/admin/ProjectTypesPage";
```

2. In navigation.ts, add the nav item with admin role restriction:
```typescript
import { Layers } from "lucide-react";

export const navItems: NavItem[] = [
  { href: "/", label: "Dashboard", icon: LayoutDashboard },
  { href: "/projects", label: "Projects", icon: FolderKanban },
  { href: "/teams", label: "Teams", icon: Users },
  { href: "/tasks", label: "My Tasks", icon: ClipboardList },
  { href: "/admin/users", label: "Users", icon: UserCog, roles: ["admin"] },
  { href: "/admin/project-types", label: "Project Types", icon: Layers, roles: ["admin"] }, // NEW
  { href: "/settings", label: "Settings", icon: Settings },
];
```

The Layers icon visually represents templates/schemas which is what project types are.
  </action>
  <verify>
1. Log in as admin user - "Project Types" appears in sidebar
2. Log in as non-admin - "Project Types" does NOT appear in sidebar
3. Navigate to /admin/project-types as admin - page loads
4. Navigate to /admin/project-types as non-admin - redirected (ProtectedRoute behavior)
  </verify>
  <done>
Route configured with admin protection; nav item visible only to admin users.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` succeeds with no errors
2. Admin user sees "Project Types" in sidebar navigation
3. Clicking "Project Types" navigates to /admin/project-types
4. Page displays list of project types (or empty state)
5. Non-admin users do not see the nav item
6. Direct URL access to /admin/project-types by non-admin is blocked
</verification>

<success_criteria>
- ProjectTypesPage renders with proper styling matching design system
- Route is protected by admin role
- Nav item appears only for admin users
- Page uses existing useProjectTypes hook for data fetching
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-ux-navigation-flow/05.1-02-SUMMARY.md`
</output>
