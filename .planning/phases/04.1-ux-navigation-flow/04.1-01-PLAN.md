---
plan_id: "4.1-01"
title: "Install shadcn Components and Create Navigation Config"
phase: "4.1"
phase_name: "UX Navigation Flow"
wave: 1
approval: "auto"
depends_on: []
files_modified:
  - apps/web/package.json
  - apps/web/src/components/ui/sidebar.tsx
  - apps/web/src/components/ui/breadcrumb.tsx
  - apps/web/src/components/ui/tooltip.tsx
  - apps/web/src/components/ui/dropdown-menu.tsx
  - apps/web/src/components/ui/avatar.tsx
  - apps/web/src/components/ui/sheet.tsx
  - apps/web/src/components/ui/button.tsx
  - apps/web/src/components/ui/separator.tsx
  - apps/web/src/components/ui/input.tsx
  - apps/web/src/components/ui/skeleton.tsx
  - apps/web/src/lib/navigation.ts
---

<objective>
Install required shadcn/ui components for navigation infrastructure and create the navigation configuration file with role-based filtering support.

Purpose: Establish the component foundation and navigation data model for the entire navigation system.
Output: All shadcn components installed, navigation config with role-based items defined.
</objective>

<context>
@.planning/phases/04.1-ux-navigation-flow/04.1-CONTEXT.md
@.planning/phases/04.1-ux-navigation-flow/04.1-RESEARCH.md
@apps/web/components.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn/ui navigation components</name>
  <files>
    apps/web/src/components/ui/sidebar.tsx
    apps/web/src/components/ui/breadcrumb.tsx
    apps/web/src/components/ui/tooltip.tsx
    apps/web/src/components/ui/dropdown-menu.tsx
    apps/web/src/components/ui/avatar.tsx
    apps/web/src/components/ui/sheet.tsx
    apps/web/src/components/ui/button.tsx
    apps/web/src/components/ui/separator.tsx
    apps/web/src/components/ui/input.tsx
    apps/web/src/components/ui/skeleton.tsx
  </files>
  <action>
Run from apps/web directory:
```bash
cd apps/web && pnpm dlx shadcn@latest add sidebar breadcrumb tooltip dropdown-menu avatar sheet button separator input skeleton
```

This installs all required shadcn components for:
- Sidebar: Collapsible navigation with icon mode
- Breadcrumb: Path navigation
- Tooltip: Collapsed sidebar tooltips with delay
- Dropdown-menu: User profile menu
- Avatar: User avatar with fallback
- Sheet: Mobile sidebar drawer (used internally by sidebar)
- Button: Various navigation buttons
- Separator: Visual dividers in sidebar
- Input: Search in sidebar (future)
- Skeleton: Loading states
  </action>
  <verify>
```bash
ls apps/web/src/components/ui/ | grep -E "sidebar|breadcrumb|tooltip|dropdown|avatar|sheet|button"
```
All component files should exist.
  </verify>
  <done>shadcn components installed in apps/web/src/components/ui/</done>
</task>

<task type="auto">
  <name>Task 2: Create navigation configuration</name>
  <files>apps/web/src/lib/navigation.ts</files>
  <action>
Create `apps/web/src/lib/navigation.ts` with navigation item definitions and role-based filtering:

```typescript
import {
  LayoutDashboard,
  FolderKanban,
  Users,
  UserCog,
  ClipboardList,
  Settings,
  type LucideIcon,
} from "lucide-react";

export interface NavItem {
  href: string;
  label: string;
  icon: LucideIcon;
  roles?: string[]; // If undefined, visible to all authenticated users
}

export const navItems: NavItem[] = [
  { href: "/", label: "Dashboard", icon: LayoutDashboard },
  { href: "/projects", label: "Projects", icon: FolderKanban },
  { href: "/teams", label: "Teams", icon: Users },
  { href: "/tasks", label: "My Tasks", icon: ClipboardList },
  { href: "/admin/users", label: "Users", icon: UserCog, roles: ["admin"] },
  { href: "/settings", label: "Settings", icon: Settings },
];

export function filterNavItems(items: NavItem[], userRole?: string): NavItem[] {
  return items.filter((item) => {
    if (!item.roles) return true;
    if (!userRole) return false;
    return item.roles.includes(userRole);
  });
}

// Route label mapping for breadcrumbs
export const routeLabels: Record<string, string> = {
  "": "Home",
  projects: "Projects",
  new: "New",
  edit: "Edit",
  teams: "Teams",
  admin: "Admin",
  users: "Users",
  tasks: "Tasks",
  annotate: "Annotate",
  settings: "Settings",
};
```
  </action>
  <verify>
```bash
cat apps/web/src/lib/navigation.ts | head -20
```
File should contain NavItem interface and navItems array.
  </verify>
  <done>Navigation config file exists with role-based items and route labels</done>
</task>

</tasks>

<verification>
- [ ] All shadcn components installed (sidebar, breadcrumb, tooltip, dropdown-menu, avatar, sheet, button, separator, input, skeleton)
- [ ] apps/web/src/lib/navigation.ts exists with navItems and filterNavItems
- [ ] No TypeScript errors: `cd apps/web && pnpm tsc --noEmit`
</verification>

<success_criteria>
- shadcn/ui components are available in @/components/ui
- Navigation config exports NavItem type, navItems array, and filterNavItems function
- Route labels defined for breadcrumb generation
</success_criteria>

<output>
After completion, create `.planning/phases/04.1-ux-navigation-flow/04.1-01-SUMMARY.md`
</output>
