# Plan 09.1-06 Summary: Step Configuration Forms

## Delivered

### Forms (apps/web/src/components/workflow/ConfigPanel/forms/)

**LayoutAssignment.tsx**
- Dropdown to select from available layouts (mock API for now)
- Preview thumbnail for each layout option
- Large preview when layout selected
- "Create New Layout" link to layout editor

**ConsensusConfig.tsx**
- Agreement metric dropdown: Exact Match, Cohen's Kappa, Fleiss' Kappa, Jaccard/IoU, Custom
- Threshold slider (0.0-1.0) with interpretation text
- On Agreement action: auto_complete, send_to_review, next_step
- On Disagreement action: send_to_adjudication, send_to_review, add_annotator
- Show Previous Annotations toggle

**AssignmentConfig.tsx**
- Assignment mode: Automatic, Manual, Round Robin, Least Loaded
- Minimum annotators input
- Required Skills multi-select (mock API)
- Required Roles multi-select (mock API)
- Load Balancing toggle

**CompletionCriteria.tsx**
- Minimum annotations input
- Unique annotators required toggle
- Timeout with value + unit (minutes/hours/days), max 480 min
- Auto-complete when criteria met toggle
- On Timeout action: reassign, escalate, skip, extend

**ConditionEditor.tsx**
- Condition type: Always, On Complete, On Agreement, On Disagreement, Custom Expression
- Visual expression builder with variable/operator/value rows
- AND/OR connectors between conditions
- Raw expression editor toggle
- Branch label input

### StepConfigContent Router
Updated to use actual forms:
- **Annotation**: Tabs for Layout, Assignment, Consensus, Completion
- **Review**: Tabs for Layout, Assignment, Completion + show previous toggle
- **Adjudication**: Tabs for Layout, Consensus, Assignment
- **Conditional**: ConditionEditor with expression builder
- **Auto-Process**: Processor type, config JSON, error handling
- **Sub-Workflow**: Workflow selection, input/output mapping
- **Visual nodes** (start, end, fork, join): Info display only

### UI Components Added
- `apps/web/src/components/ui/label.tsx` - Radix Label
- `apps/web/src/components/ui/switch.tsx` - Radix Switch toggle
- `apps/web/src/components/ui/slider.tsx` - Radix Slider

## Verification
- ✅ Select annotation node → see Layout, Consensus, Assignment, Completion tabs
- ✅ Select condition node → see condition editor with expression builder
- ✅ Changes persist when closing and reopening panel

## Files Created
- `apps/web/src/components/workflow/ConfigPanel/forms/LayoutAssignment.tsx`
- `apps/web/src/components/workflow/ConfigPanel/forms/ConsensusConfig.tsx`
- `apps/web/src/components/workflow/ConfigPanel/forms/AssignmentConfig.tsx`
- `apps/web/src/components/workflow/ConfigPanel/forms/CompletionCriteria.tsx`
- `apps/web/src/components/workflow/ConfigPanel/forms/ConditionEditor.tsx`
- `apps/web/src/components/workflow/ConfigPanel/forms/index.ts`
- `apps/web/src/components/ui/label.tsx`
- `apps/web/src/components/ui/switch.tsx`
- `apps/web/src/components/ui/slider.tsx`

## Files Modified
- `apps/web/src/components/workflow/ConfigPanel/StepConfigContent.tsx`
- `apps/web/src/components/workflow/types.ts` (added required_skills)
