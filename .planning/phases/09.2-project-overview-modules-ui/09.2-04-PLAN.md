---
phase: 09.2-project-overview-modules-ui
plan: 04
type: execute
wave: 2
depends_on: ["09.2-01"]
files_modified:
  - apps/web/src/components/project/modules/TeamModule.tsx
  - apps/web/src/components/project/modules/SkillsModule.tsx
  - apps/web/src/components/project/modules/index.ts
autonomous: true

must_haves:
  truths:
    - "TeamModule shows assigned team name and member count"
    - "Clicking TeamModule opens modal with team selector"
    - "SkillsModule shows skill badges (max 3, then +N more)"
    - "Clicking SkillsModule opens modal with multi-select"
  artifacts:
    - path: "apps/web/src/components/project/modules/TeamModule.tsx"
      provides: "Team assignment display and edit module"
      exports: ["TeamModule"]
    - path: "apps/web/src/components/project/modules/SkillsModule.tsx"
      provides: "Skills requirements display and edit module"
      exports: ["SkillsModule"]
  key_links:
    - from: "TeamModule.tsx"
      to: "ModuleCard.tsx"
      via: "import ModuleCard"
      pattern: "import.*ModuleCard.*from"
    - from: "TeamModule.tsx"
      to: "useTeams"
      via: "fetch available teams"
      pattern: "useTeams"
    - from: "SkillsModule.tsx"
      to: "ModuleCard.tsx"
      via: "import ModuleCard"
      pattern: "import.*ModuleCard.*from"
---

<objective>
Create TeamModule and SkillsModule - two modules for assigning teams and required skills using modal edit pattern.

Purpose: Quick assignment of team and skill requirements without navigating away from project overview.

Output: Two functional module components with modal selection dialogs.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/09.2-project-overview-modules-ui/09.2-RESEARCH.md
@.planning/phases/09.2-project-overview-modules-ui/09.2-01-SUMMARY.md

@apps/web/src/components/project/modules/ModuleCard.tsx
@apps/web/src/components/ui/dialog.tsx
@apps/web/src/components/ui/badge.tsx
@apps/web/src/hooks/useTeams.ts
@apps/web/src/components/user/SkillBadges.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TeamModule with team selector modal</name>
  <files>
    apps/web/src/components/project/modules/TeamModule.tsx
    apps/web/src/components/project/modules/index.ts
  </files>
  <action>
Create TeamModule component:

```tsx
interface TeamModuleProps {
  projectId: string;
  teamId: string | null;
  teamName?: string;
  memberCount?: number;
  onUpdate: (teamId: string | null) => Promise<void>;
}
```

**Display (ModuleCard preview):**
- Icon: Users from lucide-react
- Title: "Assigned Team"
- Configured: Team name + member count ("Engineering • 12 members")
  - Could also show mini avatar stack if team data includes member avatars
- Unconfigured: "No team assigned" + "Assign Team" action

**Modal (Dialog):**
- Title: "Assign Team"
- Content: List of teams from useTeams() hook
- Each team row shows:
  - Team name
  - Member count
  - Radio/checkbox selection indicator
- Option to clear assignment (if currently assigned)
- Search/filter input at top if many teams
- Footer: Cancel + Save buttons

**Team list item structure:**
```tsx
<div className="flex items-center justify-between p-3 rounded-lg border cursor-pointer hover:bg-muted/50">
  <div>
    <p className="font-medium">{team.name}</p>
    <p className="text-sm text-muted-foreground">{team.member_count} members</p>
  </div>
  {isSelected && <Check className="size-5 text-primary" />}
</div>
```

Add to barrel export.
  </action>
  <verify>
TypeScript compiles
Module shows team name and member count or empty state
Modal shows list of available teams
Selecting team and saving updates assignment
  </verify>
  <done>
TeamModule displays assigned team and opens modal for team selection.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create SkillsModule with multi-select modal</name>
  <files>
    apps/web/src/components/project/modules/SkillsModule.tsx
    apps/web/src/components/project/modules/index.ts
  </files>
  <action>
Create SkillsModule component:

```tsx
interface Skill {
  skill_id: string;
  name: string;
}

interface SkillsModuleProps {
  projectId: string;
  requiredSkills: Skill[];
  onUpdate: (skillIds: string[]) => Promise<void>;
}
```

**Display (ModuleCard preview):**
- Icon: Award from lucide-react
- Title: "Required Skills"
- Configured: Show skill badges (max 3 visible, then "+N more")
  ```tsx
  {skills.slice(0, 3).map(s => <Badge key={s.skill_id}>{s.name}</Badge>)}
  {skills.length > 3 && <Badge variant="secondary">+{skills.length - 3} more</Badge>}
  ```
- Unconfigured: "No skills required" + "Add Skills" action

**Modal (Dialog):**
- Title: "Required Skills"
- Description: "Select skills that annotators must have to work on this project"
- Content: Checkbox list of all available skills
  - Fetch from skills API (create useSkills hook if needed, or use existing)
  - Show skill name + checkbox
  - Selected skills at top (optional nice-to-have)
- Footer: Cancel + Save buttons

**Checkbox list structure:**
```tsx
<div className="space-y-2 max-h-64 overflow-y-auto">
  {allSkills.map(skill => (
    <label key={skill.skill_id} className="flex items-center gap-3 p-2 rounded hover:bg-muted/50 cursor-pointer">
      <Checkbox
        checked={selectedIds.includes(skill.skill_id)}
        onCheckedChange={(checked) => toggleSkill(skill.skill_id, checked)}
      />
      <span>{skill.name}</span>
    </label>
  ))}
</div>
```

Note: If useSkills hook doesn't exist, create a simple one that fetches from /api/skills.

Add to barrel export.
  </action>
  <verify>
TypeScript compiles
Module shows up to 3 skill badges with overflow indicator
Modal shows checkbox list of available skills
Save updates required skills list
  </verify>
  <done>
SkillsModule displays skill badges and opens modal for multi-select skill configuration.
  </done>
</task>

</tasks>

<verification>
- `cd apps/web && pnpm exec tsc --noEmit` passes
- TeamModule renders team preview or empty state
- SkillsModule renders badges with +N overflow
- Both modals open and allow selection
- Save callbacks execute with selected values
</verification>

<success_criteria>
- TeamModule shows "Team Name • N members" format
- SkillsModule shows max 3 badges + "+N more" for overflow
- Both show proper empty state guidance
- Modal selections save correctly
- Components exported from modules/index.ts
</success_criteria>

<output>
After completion, create `.planning/phases/09.2-project-overview-modules-ui/09.2-04-SUMMARY.md`
</output>
