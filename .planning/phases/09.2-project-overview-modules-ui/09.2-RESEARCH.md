# Phase 9.2 Research: Project Overview Modules & UI Polish

> Research completed: 2026-02-05
> Confidence: HIGH

## Executive Summary

Phase 9.2 transforms the project configuration experience from a wizard-heavy flow to a modular, card-based dashboard. The existing codebase already has the foundational components (shadcn/ui Card, Dialog, Badge, Skeleton) and design tokens (OKLCH colors, Tailwind spacing) needed. Key implementation patterns center on CSS Grid auto-fit for responsive layouts, modal vs. navigation decision tree for edit flows, and consistent empty state guidance.

---

## 1. Module Grid Layout Patterns

### CSS Grid Auto-Fit (Recommended)

```css
.module-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--spacing-4);
}
```

**Why auto-fit over auto-fill:**
- `auto-fit` collapses empty tracks, centering content on wide screens
- `auto-fill` keeps empty tracks, leaving awkward gaps
- For module chips with varying content heights, auto-fit provides cleaner layouts

### Breakpoint Strategy

| Viewport | Columns | Min Card Width |
|----------|---------|----------------|
| < 640px  | 1       | 100%           |
| 640-1024 | 2       | 280px          |
| > 1024   | 3-4     | 280px          |

The `minmax(280px, 1fr)` pattern handles this automatically without media queries.

---

## 2. Module Card Component Architecture

### Base Card Structure

```tsx
interface ModuleCardProps {
  title: string;
  icon: React.ReactNode;
  status: 'configured' | 'unconfigured' | 'warning';
  preview: React.ReactNode;
  onClick: () => void;
  isLoading?: boolean;
}
```

### Card States

| State | Visual Treatment |
|-------|------------------|
| Configured | Normal card with preview content |
| Unconfigured | Muted background, dashed border, guidance text |
| Warning | Yellow/amber border, warning icon |
| Loading | Skeleton matching card structure |
| Hover | Subtle lift (translate-y-[-2px]), shadow increase |

### Existing Components to Leverage

From the codebase analysis:
- `packages/frontend/src/components/ui/card.tsx` - Base Card, CardHeader, CardContent
- `packages/frontend/src/components/ui/dialog.tsx` - Modal dialogs
- `packages/frontend/src/components/ui/badge.tsx` - Status badges, skill tags
- `packages/frontend/src/components/ui/skeleton.tsx` - Loading states

---

## 3. Modal vs. Navigation Decision Tree

| Module | Edit Complexity | Edit Mode | Rationale |
|--------|-----------------|-----------|-----------|
| Project Type | Low (1 selection) | Modal | Single dropdown, instant feedback |
| Deadline | Low (date + action) | Modal | Date picker, immediate save |
| Team | Low (1 selection) | Modal | Team dropdown, instant feedback |
| Skills Required | Medium (multi-select) | Modal | Checkbox list, batch save |
| Data Sources | High (CRUD list) | Navigate | Multiple items, complex config per source |
| Data Schemas | High (JSON editor) | Navigate | Large content, requires full screen |
| Workflow | High (visual builder) | Navigate | React Flow canvas needs space |

### Modal Pattern (shadcn Dialog)

```tsx
<Dialog open={open} onOpenChange={setOpen}>
  <DialogTrigger asChild>
    <ModuleCard ... />
  </DialogTrigger>
  <DialogContent>
    <DialogHeader>
      <DialogTitle>Select Project Type</DialogTitle>
    </DialogHeader>
    {/* Form content */}
    <DialogFooter>
      <Button variant="outline" onClick={() => setOpen(false)}>Cancel</Button>
      <Button onClick={handleSave}>Save</Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

### Navigation Pattern

```tsx
<ModuleCard
  onClick={() => navigate(`/projects/${projectId}/data-sources`)}
  ...
/>
```

---

## 4. Module Preview Specifications

### Project Type Module
- Display: Type name + icon (e.g., "üè∑Ô∏è Named Entity Recognition")
- Empty: "No type selected"

### Deadline Module
- Display: Date formatted + countdown ("Feb 28, 2026 ‚Ä¢ 23 days left")
- Visual: Progress ring or countdown indicator
- Empty: "No deadline set"

### Data Sources Module
- Display: Count + names truncated ("3 sources: S3 Bucket, API Feed...")
- Empty: "No data sources configured"

### Data Schemas Module
- Display: Input/output field counts ("Input: 5 fields ‚Ä¢ Output: 3 fields")
- Empty: "Schemas not defined"

### Workflow Module
- Display: Mini thumbnail of workflow graph (React Flow minimap or static SVG)
- Empty: "No workflow designed"

### Team Module
- Display: Team name + avatar stack ("Engineering ‚Ä¢ 5 members")
- Empty: "No team assigned"

### Skills Module
- Display: Skill badges (max 3, then "+N more")
- Empty: "No skills required"

---

## 5. Empty State Design Patterns

### Structure

```tsx
<div className="flex flex-col items-center justify-center p-6 text-center">
  <Icon className="h-10 w-10 text-muted-foreground mb-3" />
  <p className="text-sm text-muted-foreground mb-2">
    {explanation}
  </p>
  <Button variant="outline" size="sm">
    {actionLabel}
  </Button>
</div>
```

### Examples

| Module | Icon | Explanation | Action |
|--------|------|-------------|--------|
| Project Type | FileType | "Choose how tasks are structured" | "Select Type" |
| Deadline | Calendar | "Set a target completion date" | "Set Deadline" |
| Data Sources | Database | "Connect your annotation data" | "Add Source" |
| Workflow | GitBranch | "Design the annotation flow" | "Create Workflow" |

---

## 6. Loading Skeleton Patterns

### Principle: Match Skeleton to Card Structure

```tsx
// Bad - generic rectangle
<Skeleton className="h-32 w-full" />

// Good - matches actual card layout
<Card>
  <CardHeader className="flex flex-row items-center gap-2">
    <Skeleton className="h-5 w-5 rounded" />
    <Skeleton className="h-4 w-24" />
  </CardHeader>
  <CardContent>
    <Skeleton className="h-4 w-full mb-2" />
    <Skeleton className="h-4 w-3/4" />
  </CardContent>
</Card>
```

---

## 7. UI Polish Audit Checklist

### Spacing Consistency

| Element | Spacing Token |
|---------|---------------|
| Page padding | `p-6` (24px) |
| Section gap | `space-y-6` |
| Card padding | `p-4` (16px) |
| Card gap in grid | `gap-4` (16px) |
| Form field gap | `space-y-4` |
| Button gap | `gap-2` (8px) |

### Card Styling Standards

```css
/* Base card */
.card {
  border-radius: var(--radius-lg);
  border: 1px solid var(--border);
  background: var(--card);
  box-shadow: var(--shadow-sm);
}

/* Hover state */
.card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-2px);
  transition: all 150ms ease;
}

/* Interactive card (clickable) */
.card-interactive {
  cursor: pointer;
}
```

### Dark Mode Considerations

- Already using OKLCH colors which provide perceptual consistency
- Pure black (`--background: 0 0% 0%`) for OLED-friendly dark mode
- Borders should be subtle (`--border` at low contrast)
- Hover states use `--accent` color

---

## 8. Simplified Project Creation

### Current Flow (to simplify)
Multi-step wizard with many fields

### New Flow
Single form with 3 fields:
1. **Name** (required) - Text input
2. **Description** (optional) - Textarea
3. **Tags** (optional) - Tag input with autocomplete

### Post-Creation Redirect
After create ‚Üí redirect to Project Overview with modules

```tsx
const handleCreate = async (data: CreateProjectData) => {
  const project = await createProject(data);
  navigate(`/projects/${project.id}`);
  toast.success('Project created! Configure your project below.');
};
```

---

## 9. Platform-Wide Styling Issues to Address

### Common Problems Observed

1. **Inconsistent padding** - Some pages use p-4, others p-6, some have none
2. **Missing hover states** - Interactive elements without visual feedback
3. **No loading states** - Data fetching shows blank screens
4. **Hardcoded colors** - Some components bypass design tokens
5. **Inconsistent card styling** - Various border-radius and shadow values

### Priority Screens for Audit

1. ProjectsPage (list view)
2. Project Overview (new)
3. Team pages
4. User profile
5. Data source configuration
6. Workflow designer

---

## 10. Technical Implementation Notes

### State Management for Modules

Each module can fetch independently:
```tsx
const { data: projectType, isLoading } = useQuery({
  queryKey: ['project', projectId, 'type'],
  queryFn: () => getProjectType(projectId),
});
```

### Optimistic Updates for Modal Saves

```tsx
const mutation = useMutation({
  mutationFn: updateProjectType,
  onMutate: async (newType) => {
    await queryClient.cancelQueries(['project', projectId]);
    const previous = queryClient.getQueryData(['project', projectId]);
    queryClient.setQueryData(['project', projectId], old => ({
      ...old,
      projectType: newType,
    }));
    return { previous };
  },
  onError: (err, newType, context) => {
    queryClient.setQueryData(['project', projectId], context.previous);
  },
  onSettled: () => {
    queryClient.invalidateQueries(['project', projectId]);
  },
});
```

---

## Key Decisions for Planning

1. **CSS Grid auto-fit** for responsive module layout (no media queries needed)
2. **shadcn Dialog** for simple module edits (Type, Deadline, Team, Skills)
3. **Navigation** for complex module edits (Data Sources, Schemas, Workflow)
4. **Skeleton matching** - loading skeletons match actual card structure
5. **Empty states with guidance** - every unconfigured module has helpful text + action
6. **Spacing tokens** - strict adherence to p-4, p-6, gap-4 pattern

---

## Sources

- CSS-Tricks: Auto-Sizing Columns in CSS Grid
- shadcn/ui: Card, Dialog, Skeleton documentation
- LogRocket: React Loading Skeleton patterns
- Toptal: Empty State UX Design
- Tailwind CSS: Spacing scale documentation
- UserPilot: Modal UX Design Best Practices 2026
