---
phase: 09.2-project-overview-modules-ui
plan: 05
type: execute
wave: 2
depends_on: ["09.2-01"]
files_modified:
  - apps/web/src/components/project/modules/DataSourcesModule.tsx
  - apps/web/src/components/project/modules/DataSchemasModule.tsx
  - apps/web/src/components/project/modules/WorkflowModule.tsx
  - apps/web/src/components/project/modules/index.ts
autonomous: true

must_haves:
  truths:
    - "DataSourcesModule shows source count and names"
    - "Clicking DataSourcesModule navigates to data sources config"
    - "DataSchemasModule shows field counts"
    - "Clicking DataSchemasModule navigates to schema config"
    - "WorkflowModule shows mini workflow preview"
    - "Clicking WorkflowModule navigates to workflow designer"
  artifacts:
    - path: "apps/web/src/components/project/modules/DataSourcesModule.tsx"
      provides: "Data sources preview and navigation module"
      exports: ["DataSourcesModule"]
    - path: "apps/web/src/components/project/modules/DataSchemasModule.tsx"
      provides: "Schema preview and navigation module"
      exports: ["DataSchemasModule"]
    - path: "apps/web/src/components/project/modules/WorkflowModule.tsx"
      provides: "Workflow preview and navigation module"
      exports: ["WorkflowModule"]
  key_links:
    - from: "DataSourcesModule.tsx"
      to: "ModuleCard.tsx"
      via: "import ModuleCard"
      pattern: "import.*ModuleCard.*from"
    - from: "WorkflowModule.tsx"
      to: "/projects/:id/workflow"
      via: "useNavigate"
      pattern: "navigate.*workflow"
---

<objective>
Create DataSourcesModule, DataSchemasModule, and WorkflowModule - three modules that navigate to dedicated screens for complex configuration.

Purpose: These modules have complex editing needs requiring full screens, so they show previews and navigate on click.

Output: Three preview modules that navigate to their respective configuration screens.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/09.2-project-overview-modules-ui/09.2-RESEARCH.md
@.planning/phases/09.2-project-overview-modules-ui/09.2-01-SUMMARY.md

@apps/web/src/components/project/modules/ModuleCard.tsx
@apps/web/src/pages/WorkflowDesignerPage.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DataSourcesModule with navigate-to-config</name>
  <files>
    apps/web/src/components/project/modules/DataSourcesModule.tsx
    apps/web/src/components/project/modules/index.ts
  </files>
  <action>
Create DataSourcesModule component:

```tsx
interface DataSource {
  id: string;
  name: string;
  type: string; // 's3', 'api', 'local', etc.
}

interface DataSourcesModuleProps {
  projectId: string;
  dataSources: DataSource[];
}
```

**Display (ModuleCard preview):**
- Icon: Database from lucide-react
- Title: "Data Sources"
- Configured: Show count + truncated names
  ```tsx
  // "3 sources: S3 Bucket, API Feed, Local..."
  const preview = dataSources.length > 0 
    ? `${dataSources.length} source${dataSources.length > 1 ? 's' : ''}: ${
        dataSources.slice(0, 2).map(s => s.name).join(', ')
      }${dataSources.length > 2 ? '...' : ''}`
    : null;
  ```
- Unconfigured: "No data sources configured" + "Add Source" action

**Click behavior:**
- Navigate to workflow designer Data tab: `/projects/${projectId}/workflow?tab=data`
- Use `useNavigate` from react-router-dom

```tsx
const navigate = useNavigate();
const handleClick = () => {
  navigate(`/projects/${projectId}/workflow?tab=data`);
};
```

Add to barrel export.
  </action>
  <verify>
TypeScript compiles
Module shows source count and names
Clicking navigates to workflow designer data tab
Empty state shows guidance
  </verify>
  <done>
DataSourcesModule displays source preview and navigates to data configuration.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create DataSchemasModule with navigate-to-config</name>
  <files>
    apps/web/src/components/project/modules/DataSchemasModule.tsx
    apps/web/src/components/project/modules/index.ts
  </files>
  <action>
Create DataSchemasModule component:

```tsx
interface Schema {
  fields: Record<string, unknown>;
}

interface DataSchemasModuleProps {
  projectId: string;
  inputSchema?: Schema;
  outputSchema?: Schema;
}
```

**Display (ModuleCard preview):**
- Icon: FileJson from lucide-react
- Title: "Data Schemas"
- Configured: Show field counts
  ```tsx
  const inputCount = inputSchema ? Object.keys(inputSchema.fields || {}).length : 0;
  const outputCount = outputSchema ? Object.keys(outputSchema.fields || {}).length : 0;
  // "Input: 5 fields • Output: 3 fields"
  ```
- Warning state: If output schema missing (required for annotation)
- Unconfigured: "Schemas not defined" + "Define Schemas" action

**Click behavior:**
- Navigate to project edit schema section: `/projects/${projectId}/edit#schema`
- Or if workflow designer has schema tab: `/projects/${projectId}/workflow?tab=data`

Add to barrel export.
  </action>
  <verify>
TypeScript compiles
Module shows field counts for input/output schemas
Clicking navigates to schema configuration
Warning shown if output schema missing
  </verify>
  <done>
DataSchemasModule displays schema field counts and navigates to schema configuration.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create WorkflowModule with mini preview</name>
  <files>
    apps/web/src/components/project/modules/WorkflowModule.tsx
    apps/web/src/components/project/modules/index.ts
  </files>
  <action>
Create WorkflowModule component:

```tsx
interface WorkflowModuleProps {
  projectId: string;
  hasWorkflow: boolean;
  stepCount?: number;
  workflowName?: string;
}
```

**Display (ModuleCard preview):**
- Icon: GitBranch from lucide-react
- Title: "Workflow"
- Configured: Show workflow summary
  ```tsx
  // "5 steps configured" or workflow name if available
  // Optional: Mini visual representation (simple boxes connected by lines)
  // For MVP, just show text summary
  ```
- Unconfigured: "No workflow designed" + "Create Workflow" action

**Mini preview (optional enhancement):**
Simple SVG or div-based representation:
```tsx
// Simple 3-box representation
<div className="flex items-center gap-1 mt-2">
  <div className="w-8 h-6 rounded border bg-muted" />
  <div className="w-4 h-0.5 bg-border" />
  <div className="w-8 h-6 rounded border bg-muted" />
  <div className="w-4 h-0.5 bg-border" />
  <div className="w-8 h-6 rounded border bg-muted" />
  {stepCount > 3 && <span className="text-xs text-muted-foreground">+{stepCount - 3}</span>}
</div>
```

**Click behavior:**
- Navigate to workflow designer: `/projects/${projectId}/workflow`

Add to barrel export.
  </action>
  <verify>
TypeScript compiles
Module shows workflow summary or empty state
Optional mini preview renders without errors
Clicking navigates to workflow designer
  </verify>
  <done>
WorkflowModule displays workflow preview and navigates to workflow designer.
  </done>
</task>

</tasks>

<verification>
- `cd apps/web && pnpm exec tsc --noEmit` passes
- All three modules render preview content
- Click navigation works to correct destinations
- Empty states show proper guidance
- All exported from modules/index.ts
</verification>

<success_criteria>
- DataSourcesModule shows "N sources: name, name..."
- DataSchemasModule shows "Input: N fields • Output: M fields"
- WorkflowModule shows step count or visual preview
- All navigate to correct configuration screens
- Empty states guide users to configure
</success_criteria>

<output>
After completion, create `.planning/phases/09.2-project-overview-modules-ui/09.2-05-SUMMARY.md`
</output>
